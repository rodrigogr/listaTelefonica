<!DOCTYPE html>
<html lang="pt-br" ng-app="listaTelefonica">
<head>
    <title>Lista Telefonica</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/lib/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.rtl.min.css"
        integrity="sha384-trxYGD5BY4TyBTvU5H23FalSCYwpLA0vWEvXXGm5eytyztxb+97WzzY+IWDOSbav" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf"
        crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.js"></script>
    <script src="/lib/angular/angular.js"></script>
    <script src="/lib/angular/angular-messages.js"></script>
    <script src="/lib/angular/uiAccordionDirective.js"></script>
</head>
<body ng-controller="listaTelefonicaCtrl">
    <div class="jumbotron">
        <!--<h3 ng-bind="app"></h3>-->
        <!--<h3>{{app}}</h3>-->
        <ui-accordion></ui-accordion>
        <input  class="form-control" type="text" ng-model="criterioDeBusca" placeholder="O que você está buscando?"/>
        <table ng-show="!contatos.length > 0" class="table table-striped">
            <tr>
                <th></th>
                <th><a href="" ng-click="ordenarPor('nome')">Nome</a></th>
                <th><a href="" ng-click="ordenarPor('telefone')">Telefone</a></th>
                <th>Operadora</th>
                <th>Data</th>
            </tr>
            <tr ng-class="{'selecionado negrito': contato.selecionado}" ng-repeat="contato in contatos | filter: nome:criterioDeBusca">
                <td><input type="checkbox" ng-model="contato.selecionado"/></td>
                <td>{{contato.nome | uppercase}}</td>
                <td>{{contato.telefone}}</td>
                <td>{{contato.operadora.nome | lowercase}}</td> 
                <td>{{contato.data | date:'dd/MM/yyyy HH:mm'}}</td>
            </tr>
        </table>
    </div>
    <div class="jumbotron">
        <!-- **********Para fazer a primeira e segunda forma**********
        <input class="form-control" type="text" ng-model="nome" placeholder="Nome"></input>
        <input class="form-control" type="text" ng-model="telefone" placeholder="Telefone"></input>
        <button class="btn btn-primary" ng-click="adicionarContato(nome, telefone)">Adicionar Contato</button>-->

        <!-- ***********Para a terceira e melhor forma *************** -->
        <form name="formContato">
            <input class="form-control" type="text" ng-model="contato.nome"  name="nome" placeholder="Nome" 
                ng-required="true" minlength="10"></input>
            <label for="txtTelefone">Telefone</label>
            <input class="form-control" type="text" ng-model="contato.telefone" id="txtTelefone" name="telefone" placeholder="Telefone" 
                ng-required="true" ng-pattern="/^\d{5}-\d{4}$/"></input>
        </form>        
        <!--***Primeira forma de validação do nome***** 
        ***com ng-required, ng-minlength e maxlength e os objetos ($valid|$invalid|$pristine|$dirty|$error)***
        <div ng-show="formContato.nome.$error.required && formContato.nome.$dirty" class="alert alert-danger">
            Por favor, preencha o nome.
        </div>
        <div ng-show="formContato.nome.$error.minlength" class="alert alert-danger">
            O campo nome deve ter no mínimo 10 caracteres.
        </div>-->        
        <!--***Segunda forma com ng-messages***-->
        <div ng-messages="formContato.nome.$error" class="alert alert-danger">
            <div ng-message="required">
                Por favor, preencha o nome.
            </div>
            <div ng-message="minlength">
                O campo nome deve ter no mínimo 10 caracteres.
            </div>
        </div>        
        <div ng-show="formContato.telefone.$error.required && formContato.telefone.$dirty" class="alert alert-danger">
            Por favor, preencha o telefone.
        </div>
        <div ng-show="formContato.telefone.$error.pattern && formContato.telefone.$dirty" class="alert alert-danger">
            O campo telefone deve ter o formato 12345-6789.
        </div>
        <button class="btn btn-primary" ng-click="adicionarContato(contato)" ng-disabled="formContato.$invalid">
            Adicionar Contato
        </button>
        <button class="btn btn-danger" ng-click="apagarContatos(contatos)" ng-if="isContatoSelecionado(contatos)">Apagar Contato</button>
        <!-- SELECTS 
            *****Primeira forma*****
        <select ng-model="contato.operadora" ng-options="operadora.nome for operadora in operadoras">-->
        
        <!--- *****Segunda Forma *****
        <select ng-model="contato.operadora" 
            ng-options="operadora.codigo as operadora.nome for operadora in operadoras">-->
        
        <!--******Terceira Forma*****-->
        <select ng-model="contato.operadora" ng-options="operadora.nome group by operadora.categoria for operadora in operadoras">
            <option value="">Selecione uma operadora</option>
        </select>
    </div>
</body>

</html>